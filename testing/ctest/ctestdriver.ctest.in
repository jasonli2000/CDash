cmake_minimum_required(VERSION 2.8)

# Settings:
set(CTEST_SITE                          "CDashTestingSite")
set(CTEST_BUILD_NAME           "CDash-CTest-@TestName@")

set(CTEST_SOURCE_DIRECTORY     "@CDash_SOURCE_DIR@/testing/ctest/@Directory@")
set(CTEST_BINARY_DIRECTORY     "@CDash_BINARY_DIR@/testing/ctest/@Directory@")
set(CTEST_CMAKE_GENERATOR      "@CMAKE_GENERATOR@")
set(CTEST_NOTES_FILES          "${CTEST_SCRIPT_DIRECTORY}/${CTEST_SCRIPT_NAME}")
set(CTEST_DROP_METHOD "http")
set(CTEST_DROP_SITE "@CDASH_SERVER@")
set(CTEST_DROP_LOCATION "/@CDASH_DIR_NAME@/submit.php?project=InsightExample")
set(CTEST_CMAKE_GENERATOR "@CMAKE_GENERATOR@")
set(CTEST_PROJECT_NAME "@ProjectName@")


ctest_start(Experimental)
ctest_configure(BUILD "${CTEST_BINARY_DIRECTORY}" RETURN_VALUE res)
ctest_build(BUILD "${CTEST_BINARY_DIRECTORY}" RETURN_VALUE res)
ctest_test(BUILD "${CTEST_BINARY_DIRECTORY}" RETURN_VALUE res)
ctest_submit()

# execute_process(COMMAND ${PYTHON} @CDashVerifyScript@)
#message(FATAL_ERROR "this test failed")
