set(OUTFILE @CDash_BINARY_DIR@/testing/ctest/alltests.out)
file(DOWNLOAD "http://@CDASH_SERVER@/@CDASH_DIR_NAME@/testing/alltests.php"
  @CDash_BINARY_DIR@/TestData/alltests.out)
file(READ @CDash_BINARY_DIR@/TestData/alltests.out OUTDATA)
string(REGEX REPLACE ".*strong>([0-9]+).*strong.*passes.*" "\\1"
  PASSED "${OUTDATA}")
string(REGEX REPLACE ".*strong>([0-9]+).*strong.*fails.*" "\\1" 
  FAILED "${OUTDATA}")
string(REGEX REPLACE ".*strong>([0-9]+).*strong.*exceptions.*" "\\1" 
  EXCEPTIONS "${OUTDATA}")
message("Passed = ${PASSED}")
message("Failed = ${FAILED}")
message("Exception = ${EXCEPTIONS}")
if(${FAILED} GREATER 0  OR ${EXCEPTIONS} GREATER 0)
  message(FATAL_ERROR "Test failed: ${OUTDATA}")
endif()
message("All Tests Passed.")
